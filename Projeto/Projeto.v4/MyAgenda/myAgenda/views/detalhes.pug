extends layout

block content
    style
        body {font-family: "Raleway", Arial, sans-serif}
        //.w3-row img {margin-bottom: -8px}
        
  
    body(class="w3-light-grey w3-padding-64 w3-center")
        img(src='/images/Logo.png' class="w3-left" )
        br
        br
        br
        br
        br
        br
        h1.w3-center Detalhes do Ficheiro
        br
        br
        
        .w3-container.w3-card.w3-white.w3-margin-bottom
            
            h2.w3-text-grey.w3-padding-16
                i.fa.fa-asterisk.fa-fw.w3-margin-right.w3-xxlarge.w3-text-teal
                td=lista.titulo
            .w3-display-container
                h5.w3-opacity
                    b 
                        td='Disciplina: '+lista.disciplina
                h5.w3-opacity.fa.fa-suitcase
                    b 
                        td='Autor: '+lista.email
                
                
                p   
                    label
                        b Descrição:  
                    td=' '+lista.desc
                p
                    label
                        b Nome Ficheiro:
                    td=' '+lista.name
                p
                    label
                        b Mimetype:
                    td=' '+lista.mimetype
                p
                    label
                        b Size:
                    td=' '+lista.size
                h6.w3-text-teal
                    i.fa.fa-calendar.fa-fw.w3-margin-right
                    td=lista.data
                
                br
                br
                a.w3-btn.w3-round-large.w3-border.w3-middle(href='/download/' + lista.name, download=lista.name) Download
                br
                br

                button.w3-btn.w3-round-large.w3-border.w3-display-bottomright(onclick="myFunction3()") Editar Ficheiro
                form.w3-container(action=('/editFicheiro/'+lista._id) method='POST' id='form1')
                       
                        div(id="myDIV2" class="w3-hide")
                            if(lista.email==lista2.email)
                                label
                                    b Titulo
                                input.w3-input.w3-border.w3-light-grey(type='text' name='titulo' id='titulo' value=lista.titulo)
                             
                                label
                                    b Disciplina
                                .w3-cell-row
                                    select.w3-select.w3-light-grey(name='disciplina')
                                        option(value='' disabled='' selected='') 1ºAno
                                        option(value='AL') Álgebra Linear
                                        option(value='Calculo') Cálculo
                                        option(value='TMD') Tópicos de Matemática Discreta
                                        option(value='PF') Programação Funcional
                                        option(value='EES') Elementos de Engenharia de Sistemas
                                        option(value='LAB1') Laboratórios de Informática I
                                        option(value='SC') Sistemas de Computação
                                        option(value='Analise') Análise
                                        option(value='TFM') Tópicos de Física Moderna
                                        option(value='LEI') Lógica EI
                                        option(value='PI') Programação Imperativa
                                        option(value='LAB2') Laboratórios de Informática II
                                        option(value='' disabled='' selected='') 2ºAno
                                        option(value='ISD') Introdução aos Sitemas Dinâmicos
                                        option(value='EA') Estatística Aplicada
                                        option(value='EC') Engenharia Económica
                                        option(value='AC') Arquitetura de Computadores
                                        option(value='CD') Comunicação de Dados
                                        option(value='AlC') Algoritmos e Complexidade
                                        option(value='SO') Sistemas Operativos
                                        option(value='POO') Programação Orientada a Objetos
                                        option(value='EEE') Eletromagnetismo EE
                                        option(value='OPCAO') OPCAO
                                        option(value='Programas') Programas
                                        option(value='LAB3') Laboratórios de Informática III
                                        option(value='' disabled='' selected='') 3ºAno
                                        option(value='BD') Base de Dados
                                        option(value='DSS') Desenvolvimento de Sistemas de Software
                                        option(value='MDIO') Modelos Determinísticos de Investigação Operacional
                                        option(value='SD') Sistemas Distribuídos
                                        option(value='RC') Redes de Computadores
                                        option(value='MNONL') Métodos Numéricos e Otimização não Linear
                                        option(value='SRCR') Sistemas de Representação de Conhecimento e Raciocínio
                                        option(value='MEIO') Modelos Estocásticos de Investigação Operacional
                                        option(value='CG') Computação Gráfica
                                        option(value='CC') Comunicações por Computador
                                        option(value='PL') Processamento de Linguagens
                                        option(value='LAB4') Laboratoórios de Informática IV
                                        option(value='' disabled='' selected='') 4ºAno
                                        option(value='WEB') WEB
                                        option(value='BD') BD
                            
                                label
                                    b Descrição
                                input.w3-input.w3-border.w3-light-grey(type='text' name='desc' id='desc' value=lista.desc)
                                
                                
                                input.w3-btn.w3-round-large.w3-border(name='edit' type='submit' value='Editar')
                            else    
                                b Não pode editar um ficheiro que não é autor

        w3-container
            
                    form.w3-container(action=('/adicionaComentarioDetalhes/'+lista._id) method='POST')
                    
                        .w3-display-container
                            if lista2.genero==1
                                img.w3-left(src='/images/masculino.png' style='width:5%' alt='Avatar')
                            else 
                                img.w3-left(src='/images/feminino.png' style='width:5%' alt='Avatar')
                            br
                            label
                            b.w3-small.w3-left
                                td=lista2.nome
                            input.w3-input.w3-border.w3-light-grey(type='text' name='comentario' id='comentario' placeholder="Adiciona um comentário") 
                        
                            input.w3-btn.w3-round-large.w3-border.w3-right(type="submit" value="Comentar" )
                    hr
                    b.w3-small.w3-left Comentários:
                    br
                    each nestedObject in lista.comentarios
                        br
                        br
                        .w3-display-container
                            if lista2.genero==1
                                img.w3-left(src='/images/masculino.png' style='width:5%' alt='Avatar')
                            else 
                                img.w3-left(src='/images/feminino.png' style='width:5%' alt='Avatar')
                            
                            label
                            b.w3-small.w3-left
                                td=nestedObject.autor
                            br
                            h6.w3-small.w3-left
                                td=nestedObject.comentario
                            br
                            //APAGARS
                            
                            br
                            td=nestedObject.dataComentario
                            br
                            br

    script.
          function myFunction3() {
              var x = document.getElementById("myDIV2");
              if (x.className.indexOf("w3-show") == -1) {
                x.className += " w3-show";
              } else {
                x.className = x.className.replace(" w3-show", "");
              }
            }

    script.
          function myFunction4() {
              var x = document.getElementById("myDIV3");
              if (x.className.indexOf("w3-show") == -1) {
                x.className += " w3-show";
              } else {
                x.className = x.className.replace(" w3-show", "");
              }
            }
    script.
        function myFunction() {
              var x = document.getElementById("myDIV3");
              if (x.className.indexOf("w3-show") == -1) {
                x.className += " w3-show";
              } else {
                x.className = x.className.replace(" w3-show", "");
              }
            }  

    script.
        function DuasFuncoes(){
            myFunction3()
            myFunction4()
        }